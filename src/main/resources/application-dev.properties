# Spring Application
spring.application.name=codex-platform

# Server Configuration
server.port=${PORT:8080}

# PostgreSQL Configuration (Neon Cloud)
spring.datasource.url=${DB_URL:jdbc:postgresql://ep-hidden-king-a10oexyf-pooler.ap-southeast-1.aws.neon.tech/codex-db?sslmode=require}
spring.datasource.username=${DB_USERNAME:neondb_owner}
spring.datasource.password=${DB_PASSWORD:npg_tXkVJ5Dy4lhe}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# HIKARI CONNECTION POOL
spring.datasource.hikari.pool-name=HikariCodexPool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=true

spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.leak-detection-threshold=20000

# Redis Configuration (Basic Spring Redis handles)
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}

# Redisson Configuration (For Redis Cloud)
redisson.single-server-config.address=${REDIS_URL:rediss://redis-11661.c212.ap-south-1-1.ec2.cloud.redislabs.com:11661}
redisson.single-server-config.username=default
redisson.single-server-config.password=${REDIS_PASSWORD:5SNfwcUb5vA7VloU9I2aSUhrSm0eGzI}
redisson.single-server-config.connection-pool-size=64
redisson.single-server-config.connection-minimum-idle-size=10

# JWT Configuration
jwt.secret=${JWT_SECRET:this-default-secret-is-for-local-dev-only-change-me-1234567890}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Docker Execution Configuration
execution.docker.host=${EXECUTION_DOCKER_HOST:npipe:////./pipe/docker_engine}
execution.temp-dir=${EXECUTION_TEMP_DIR:C:/temp/codex/submissions}
execution.default-time-limit-ms=5000
execution.default-memory-limit-mb=256
execution.cleanup-enabled=true
execution.worker-count=1

# CORS
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# Logging
logging.level.com.codex.platform=${LOG_LEVEL:DEBUG}
logging.level.org.springframework.security=${LOG_LEVEL:INFO}
